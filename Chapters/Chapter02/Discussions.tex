%BEGIN: DISCUSSION
\section{Discussions}\label{sec:discussions}

%Service in Smart Homes
% The framework presented in Section \ref{sec:services_in_smart_homes} is solely oriented towards emulating sensors withing a smart home. The system supports in the simulated environment both emulated sensors and representation of real-life sensory data. For the implementation of virtual stubs they have employed the service-oriented computing paradigm, which is widely used to implement systems requiring high interoperability, scalability, security and reliability. One of the main advantages is that such software can seamlessly integrate other systems written in other programming languages and even deployed under different operating systems.\\

% Although they have created a highly decoupled architecture, the framework is able to represent a very limited types of entities. The characteristics monitored by the framework for the entities and the simulated agent are limited to proximity only.\\

%Simulation of Smart Environments
The eHomeSimulator \ref{sec:sim_of_smart_envs} design promotes loose coupling between components. The underlying framework's architecture offers good support for reusability of smart home services and integration with real-life devices. Sensor and devices are operated on a per room basis, not on actual proximity to each individual entity. Devices in the current room can be operated through the \emph{Control Panel} (e.g. turn lamp on/off). The simulated entities are static (the agent can't move them). Actually, all the agent can do is move from room to room, this will trigger sensors to be activated/deactivated, which in turn might might change the state of other entities. There is no support for mobility of devices, nor is it in plan for future work. Moreover, the user can manipulate the agent (the virtual avatar), to walk around in the 2D environment. Given the nature of the visualization, the agent can be facing four directions: forward, backward, left or right.\\

The project is close sourced, making it impossible to extend, to reuse or to contribute to it. In conclusion, the simulator is target solely on simulating sensors in a smart home and how the presence of the human agent influences the environment. The framework was not designed to simulate the environment from the human agent's point of view, it was rather designed to simulated the evolution of sensors based on the human agent's presence. From this project's perspective, eHomeSimulator imposes a limited number of interaction possibilities. That is why I am not including it in further discussions.\\

% \begin{table}[H]
% 	\begin{center}
% 		\small \begin{tabular*}{1.1\columnwidth}{lllll}
% 			\\ \hline \hline
% 			Characteristics & Simact & DiaSim & Tatus & Ubiwise \\ \hline \hline

% 			Support for physical objects? & yes & yes & yes & yes \\ \hline
% 			Support for devices? & yes & yes & yes & yes \\ \hline
% 			Simulate software running on devices? & no & no & no & yes \\ \hline
% 			Support of object composition? & yes & yes & yes & yes \\ \hline
% 			Wearable devices? & no & no & no & no \\ \hline
% 			Receive data from real-life sensors? & yes & yes & no & yes \\ \hline

% 			Monitors agent location? & yes & yes & yes & yes \\ \hline
% 			Visual spectrum of the agent? & yes & no & yes & yes \\ \hline
% 			Audio spectrum of the agent? & yes & no & yes & yes \\ \hline
% 			Body position (crouching/standing)? & yes & no & yes & yes \\ \hline
% 			Pick up object & no & no & no & no \\ \hline
% 			Carry object around & no & no & yes & yes \\ \hline
% 			Put object down & no & no & no & no \\ \hline
% 			Object in agent's hand & no & no & yes & yes \\ \hline
% 			Object in agent's pocket/backpack & no & no & no & no \\ \hline

% 			Agent interaction with devices & no & no & no & yes \\ \hline

% 			Is open sources?             & yes & no & no & yes \\ \hline
% 		\end{tabular*}
		
% 		\caption{Features comparison}
% 		\label{table:comparison}
% 	\end{center}
% \end{table}

Table \ref{table:comparison} depicts the characteristics of interest for the current work, highlighting whether or not they are offered by the related systems.

\begin{table}[H]
	\begin{center}
		\small \begin{tabular*}{1.1\columnwidth}{p{6.5cm}llll}
			\\ \hline \hline
			Characteristics & Simact & DiaSim & Tatus & Ubiwise \\ \hline \hline

			Visual representation of the simulated environment & yes & yes & yes & yes \\ \hline
			Interact with the environment through a virtual avatar & no & yes & yes & yes \\ \hline
			360\textdegree control of the avatar & no & no & yes & yes \\ \hline
			Simulate sensors & yes & yes & yes & yes \\ \hline
			Directly interact with physical objects & yes & no & no & no \\ \hline
			Interact with physical objects using attached sensors & yes & yes & yes & yes \\ \hline
			Interact with devices (mediators) & yes & yes & yes & yes \\ \hline
			Interact with software (virtual objects) & no & no & no & yes \\ \hline
			Pick objects up & no & no & no & no \\ \hline
			Put objects down & no & no & no & no \\ \hline
			Carry objects around & no & no & no & yes \\ \hline
			Monitors the agent's location & no & yes & yes & yes \\ \hline
			Visual spectrum of the agent \footnote{Objects within to the agents sight} & no & no & yes & yes \\ \hline
			Classify objects based on agent proximity & no & no & no & no \\ \hline
		 	Provides API for third party services to access context data & yes & no & yes & no \\ \hline
		 	Is open source? & yes & no & no & yes \\ \hline
		\end{tabular*}
		
		\caption{Features comparison}
		\label{table:comparison}
	\end{center}
\end{table}

%Diasim
After thorough analysis, I found DiaSim's \ref{sec:diasim} simulation model as being generic enough to possibly host our needs. The simulation model seems to be flexible and open for further modifications. But, the system is not open source and the research team is not yet open for external collaboration.\\

Even if building on top of DiaSim would have been possible, some outstanding issues should be tackled. The simulated environment does not monitor the agent's visual spectrum (objects within to the agents sight). To accommodate this need, the renderer module should be entirely replaced. Besides, there is no support for direct interaction with physical objects and mediators. The only type of interaction is proximity based: i.e. a sensor attached to a door would command the door to open if the agent is within range. Moreover, DiaSim is lacking an open API to enable third party service to make use of the simulated system's context data.\\

In conclusion, DiaSim offers great support for setting up a new simulation of a sensor-enhanced environment, from scratch. It simulates the evolution of the environment over time, influenced by the presence of one or many agents. But, it lacks support for the body-centric approach of the current work.\\

%Simact
For SIMACT \ref{sec:simact}, researchers came up with a slightly different approach. The entire simulation is controlled by the framework as it interprets the simulation scenario, described in an XML file. This is a step-by-step description of how various parameters of the system (e.g. the temperature in a room) and of objects (e.g. door opened/closed, lamp on/off) evolve. SIMACT is oriented towards observing the systems evolution over time with the ability to control the execution of the steps in a fine grained manner: pause, resume, go back, etc. As the simulation is running, it is animated in 3D view.\\

This approach comes with a drawback: SIMACT does not implement the concept of an avatar. The researcher is enabled to move a camera around, zoom in and zoom out in order to find the best spot to observe the animation of the ongoing simulation. The animation was implemented using the JMonkey game engine. This game engine has to offer more than just rendering capabilities, it allows to implement the concept of an agent offering components to implement movement and interaction with the environment. In Chapter \ref{ch:design} I will argue for JMonkey as a possible candidate to be used in my work.\\

Although the framework is released as open-source \cite{bouchard:simact:Online} under GPLv3 \cite{gpl:v3}, the code is written and documented in French. This makes it hard for non speakers to comprehend and work with the code base. I find this a drawback as it limits the number of possible contributors to the code base.\\

%Tatus
In Tatus \ref{sec:tatus}, the context-awareness is limited to sensors and actuators reacting to the user's position. The user control provided by the game engine is pretty advanced allowing the agent to move in any direction, crouch, jump, sit etc. This is a big plus as it adds a good sense of reality to the game. Multiple users can join and experience the same simulated environment at the same time, while not all players have to be human, non-player-characters (controlled by the AI of the engine) can be present as well. This enables the researcher to observe the systems behaviour while multiple are interacting with the simulated environment.\\

The \emph{Source} game engine SDK \cite{valvesrc:online} Tatus was designed and implemented upon, provides a wide range of features and components that could be used to improve this framework according to EgoSim's requirements. Therefore, it should be possible to implement direct interaction with physical object, pick-up and drop down of objects, determine objects within the agent's visual spectrum and the distance from each of them.\\

% One of the main challenges in developing TATUS was that the learning curve of the SDK. It was a difficult and cumbersome process, making it inefficient and time-consuming. If EgoSim was to extend Tatus or reuse the \emph{Source} game engine, it would require a deep knowledge of the SDK. Further, this steep learning curve ads up for each possible contributor to the code base, making future development an inefficient process.\\

Unfortunately Tatus is not open-source, making it unusable for research outside the institution it was developed in.\\

%Ubiwise
UbiWise \ref{sec:ubiwise} is solely oriented towards simulating prototyped devices and their interaction within the target environment. The virtual agent can interact with the prototyped devices and with the software running on them, some of the device may even be hand-held. It has no direct interaction with physical objects, the framework does no track the agent position towards objects within the environment and does not determine the objects within the agent's field of vision. The underlying game engine might provide the necessary means to accommodate these requirements, but the effort depends greatly on individual experience in C programming.\\

The UbiWise framework was released under LGPL\cite{lgpl}, offering the software to the open-source community. The main challenge is that it was developed towards simulating the interaction of the agent with the device prototypes within the target environment, not with the actual environment. It was implemented with a certain goal in mind and it poses an unnecessary technical challenge to accommodate EgoSim's set of goals.\\
%END: DISCUSSION